databaseChangeLog:
  - changeSet:
      id: "02.create_mdm_message_outbox_table.yaml"
      author: "Pozdeev IY"
      remarks: "Создание таблицы mdm_message_outbox для хранения статуса отправки MDM события во внешний сервис"
      changes:
        - createTable:
            tableName: mdm_message_outbox
            columns:
              - column:
                  name: id
                  type: bigserial
                  remarks: "уникальный числовой идентификатор записи"
                  primaryKey: true
              - column:
                  name: mdm_message_id
                  type: uuid
                  remarks: "уникальный идентификатор события из таблицы mdm_message"
              - column:
                  name: status
                  type: varchar
                  remarks: "статус доставки сообщения, возможные значения: NEW, DELIVERED, ERROR, FATAL_ERROR"
              - column:
                  name: target
                  type: varchar
                  remarks: "направление куда должно быть доставлено сообщение, возможные значения: USER_DATA_SERVICE_ONE, USER_DATA_SERVICE_TWO"
              - column:
                  name: response_data
                  type: jsonb
                  remarks: "ответ внешнего сервиса должен быть представлен в виде json с двумя полями: response, errors"
              - column:
                  name: create_time
                  type: timestamp
                  remarks: "время создания"
              - column:
                  name: create_user
                  type: varchar
                  remarks: "пользователь, создавший запись"
              - column:
                  name: last_update_time
                  type: timestamp
                  remarks: "время обновления"
              - column:
                  name: last_update_user
                  type: varchar
                  remarks: "пользователь, изменивший запись"
